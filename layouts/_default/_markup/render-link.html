{{/*
Hugoのリンクrender hook - すべてのMarkdownリンクをカスタマイズ

このファイルは [text](url) 形式のMarkdownリンクを処理します。
- 外部リンク: 新しいタブで開く（target="_blank"）+ セキュリティ属性
- 内部リンク: 同じタブで開く
- メールリンク: デフォルト動作
*/}}

{{- $url := .Destination | safeURL -}}
{{- $isExternal := strings.HasPrefix $url "http" -}}
{{- $isEmail := strings.HasPrefix $url "mailto:" -}}
{{- $isAnchor := strings.HasPrefix $url "#" -}}

<a href="{{ $url }}"
   {{- if .Title }} title="{{ .Title }}"{{ end }}
   {{- if $isExternal }} target="_blank" rel="noopener noreferrer"{{ end -}}
>
  {{- .Text | safeHTML -}}
  {{- if $isExternal -}}
    <svg width="12" height="12" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="display: inline; margin-left: 3px; vertical-align: baseline; opacity: 0.7;">
      <path fill="currentColor" d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"/>
    </svg>
  {{- end -}}
</a>